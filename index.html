<!DOCTYPE html><html lang="id"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"><title>Room Chat BY ryyn tamvan</title><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"><style>:root{--color-primary:#00897b;--color-secondary:#FFD700;--color-bg-dark:#121212;--color-container-bg:#1e1e1e;--color-card-bg:#2d2d2d;--color-text-light:#f0f0f0;--color-text-muted:#aaaaaa;--color-sent-bg:#00897b;--color-received-bg:#333333;--color-admin-bg:#4b4b00;--color-admin-accent:#ffeb3b}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;margin:0;padding:0;background-color:var(--color-bg-dark);color:var(--color-text-light);display:flex;justify-content:center;align-items:center;min-height:100vh;padding-bottom:env(safe-area-inset-bottom, 0px)}#auth-container,#chat-container,#block-alert-container{background-color:var(--color-container-bg);border-radius:12px;box-shadow:0 8px 25px rgba(0,0,0,.4)}#auth-container{padding:30px;max-width:400px;width:90%;text-align:center}#auth-container h2{color:var(--color-secondary);margin-bottom:25px;font-size:1.8em}#auth-container input,#auth-container button{width:100%;padding:12px;margin-bottom:15px;border-radius:8px;border:1px solid #444;box-sizing:border-box;background-color:var(--color-card-bg);color:var(--color-text-light);font-size:1em}#auth-container button{background-color:var(--color-primary);font-weight:700;cursor:pointer;transition:background-color .3s,transform .1s}#auth-container button:hover{background-color:#00a693;transform:translateY(-1px)}#auth-container .switch-link{color:var(--color-primary);cursor:pointer;text-decoration:underline;margin-top:10px;display:block;font-size:.9em}#block-alert-container{display:none;padding:40px;max-width:450px;width:90%;text-align:center;border:2px solid #cc0000}#block-alert-container i{font-size:3em;color:#cc0000;margin-bottom:20px}#block-alert-container h2{color:#ff5555;margin-bottom:10px}#block-alert-container p{color:var(--color-text-muted);margin-bottom:30px;line-height:1.4}#block-alert-container button{background-color:#cc0000;color:#fff;padding:10px 20px;border:none;border-radius:25px;font-weight:700;cursor:pointer;transition:background-color .3s}#block-alert-container button:hover{background-color:#990000}#chat-container{display:none;width:100vw;max-width:500px;height:100vh;max-height:900px;flex-direction:column;border-radius:0}.chat-header{background-color:var(--color-primary);color:#fff;padding:15px 20px;font-size:1.3em;display:flex;justify-content:space-between;align-items:center;border-radius:0;box-shadow:0 2px 10px rgba(0,0,0,.3)}.chat-header i{color:var(--color-secondary);margin-right:8px}.admin-tag{background-color:var(--color-secondary);color:#121212;font-size:.6em;font-weight:700;padding:2px 6px;border-radius:4px;margin-left:5px;vertical-align:middle;display:inline-block}.chat-header button{background:rgba(255,255,255,.1);border:none;color:#fff;cursor:pointer;font-size:.9em;padding:8px 12px;border-radius:20px;transition:background-color .3s}.chat-header button:hover{background-color:#00695c}#messages{flex-grow:1;padding:15px;overflow-y:auto;background-color:var(--color-container-bg);scrollbar-color:#444 #1e1e1e;scrollbar-width:thin}#messages::-webkit-scrollbar{width:8px}#messages::-webkit-scrollbar-track{background:var(--color-container-bg)}#messages::-webkit-scrollbar-thumb{background:#555;border-radius:4px}#messages::-webkit-scrollbar-thumb:hover{background:#777}.message-bubble{display:flex;margin-bottom:12px;position:relative;transition:opacity .3s}.message-content{padding:10px 14px;border-radius:18px;max-width:80%;word-wrap:break-word;box-shadow:0 1px 1px rgba(0,0,0,.2);position:relative;cursor:pointer}.message-meta{font-size:.75em;opacity:.7;margin-top:4px;text-align:right;white-space:nowrap}.message-sender{font-weight:700;font-size:.85em;margin-bottom:2px;color:var(--color-secondary)}.is-admin .message-content{background-color:var(--color-admin-bg)!important;border:1px solid var(--color-admin-accent);color:var(--color-text-light);font-weight:500}.is-admin .message-sender{color:var(--color-admin-accent)!important}.sent{justify-content:flex-end}.sent .message-content{background-color:var(--color-sent-bg);color:#fff;border-bottom-right-radius:4px}.sent .message-meta{color:#ddd}.received{justify-content:flex-start}.received .message-content{background-color:var(--color-received-bg);color:var(--color-text-light);border-bottom-left-radius:4px}.reply-to-content{background-color:rgba(255,255,255,.1);border-left:3px solid var(--color-secondary);padding:5px 8px;border-radius:5px;margin-bottom:5px;font-size:.8em;color:var(--color-text-muted);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}.reply-to-user{font-weight:700;color:var(--color-secondary)}.reaction-menu{position:absolute;top:-35px;left:50%;transform:translateX(-50%);background:var(--color-card-bg);padding:5px;border-radius:20px;box-shadow:0 2px 10px rgba(0,0,0,.5);z-index:10;display:none;white-space:nowrap}.reaction-menu button{background:none;border:none;cursor:pointer;font-size:1.1em;padding:3px}.reactions-list{position:absolute;bottom:-10px;right:0;background:var(--color-card-bg);border-radius:10px;padding:2px 5px;font-size:.7em;box-shadow:0 1px 5px rgba(0,0,0,.3);cursor:pointer}.delete-btn{background:none;border:none;color:var(--color-text-muted);cursor:pointer;font-size:.8em;margin-left:5px;opacity:.8;transition:color .2s}.delete-btn:hover{color:red}.chat-input-area{display:flex;padding:12px;background-color:var(--color-container-bg);border-top:1px solid #333;align-items:flex-end;border-radius:0;padding-bottom:calc(12px + env(safe-area-inset-bottom, 0px))}#message-input{flex-grow:1;padding:10px;border:1px solid #444;border-radius:20px;margin-right:10px;font-size:1em;background-color:var(--color-card-bg);color:var(--color-text-light);resize:none;max-height:100px;box-sizing:border-box}#send-button{background-color:var(--color-primary);color:#fff;border:none;padding:10px;border-radius:50%;cursor:pointer;font-size:1.2em;width:45px;height:45px;min-width:45px;min-height:45px;display:flex;justify-content:center;align-items:center;transition:background-color .3s}#send-button:hover{background-color:#00695c}#reply-status{background-color:rgba(255,255,255,.05);border-left:4px solid var(--color-secondary);padding:8px 15px;display:none;font-size:.9em;color:var(--color-text-light);justify-content:space-between;align-items:center;border-top:1px solid #333}#reply-status-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:85%}#clear-reply{background:none;border:none;color:var(--color-text-muted);cursor:pointer;font-size:1.2em}#clear-reply:hover{color:var(--color-secondary)}#admin-panel{position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--color-container-bg);z-index:100;display:none;flex-direction:column}.admin-panel-header{background-color:#3f51b5;color:#fff;padding:15px 20px;font-size:1.2em;display:flex;justify-content:space-between;align-items:center}#user-list{list-style:none;padding:10px;margin:0;overflow-y:auto;flex-grow:1}.user-item{display:flex;justify-content:space-between;align-items:center;padding:15px 10px;border-bottom:1px solid #333;color:var(--color-text-light)}.user-item span{flex-grow:1;margin-right:10px}.user-actions button{background:none;border:1px solid var(--color-primary);color:var(--color-primary);padding:8px 12px;border-radius:20px;cursor:pointer;margin-left:10px;transition:background-color .2s,color .2s;display:inline-flex;align-items:center}.user-actions button.unblock-btn{border-color:#f44336;color:#f44336}.user-actions button:hover{background-color:var(--color-primary);color:var(--color-text-light)}.user-actions button.unblock-btn:hover{background-color:#f44336;color:var(--color-text-light)}.user-status{font-size:.8em;color:#f44336;font-weight:700;margin-left:10px}</style></head><body><div id="auth-container"><h2><i class="fas fa-lock" style="color:var(--color-secondary);"></i> Selamat Datang</h2><input type="email" id="email-input" placeholder="Email" required><input type="password" id="password-input" placeholder="Password" required><input type="text" id="username-input" placeholder="Nama Anda (Untuk Daftar)" style="display: none;"><button id="auth-button" onclick="handleAuth()">Login</button><a class="switch-link" onclick="toggleAuthMode()">Belum punya akun? Daftar</a><p id="auth-error" style="color: #ff5555; margin-top: 15px;"></p></div><div id="block-alert-container"><i class="fas fa-user-lock"></i><h2>AKUN DIBLOKIR</h2><p>Akses Anda ke ruang obrolan ini telah diblokir oleh Admin. Jika ini adalah kesalahan, harap hubungi pengelola.</p><button onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button></div><div id="chat-container"><div class="chat-header"><span><i class="fas fa-comments"></i> Room Chat</span><div style="display:flex; align-items:center;"><button id="admin-button" onclick="toggleAdminPanel()" style="display:none; margin-right: 10px;"><i class="fas fa-user-shield"></i> Admin Panel</button><button onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button></div></div><div id="messages"></div><div id="reply-status"><span id="reply-status-text">Membalas: <span id="reply-target-user" style="font-weight:bold;"></span>: "<span id="reply-target-text"></span>"</span><button id="clear-reply" onclick="clearReply()"><i class="fas fa-times"></i></button></div><div class="chat-input-area"><textarea type="text" id="message-input" placeholder="Ketik pesan..." onkeypress="if(event.key==='Enter' && !event.shiftKey) { event.preventDefault(); sendMessage(); }" oninput="autoResizeTextarea(this)"></textarea><button id="send-button" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button></div></div><div id="admin-panel"><div class="admin-panel-header"><span><i class="fas fa-users-cog"></i> Panel ADMIN</span><button onclick="toggleAdminPanel()" style="background: none; border: 1px solid white;"><i class="fas fa-times"></i> Tutup</button></div><ul id="user-list"><li>Memuat pengguna...</li></ul></div><script src="chat3.js"></script></body></html>
